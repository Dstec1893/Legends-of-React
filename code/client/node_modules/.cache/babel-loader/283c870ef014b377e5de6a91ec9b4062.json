{"ast":null,"code":"var _jsxFileName = \"C:\\\\Legends-of-React\\\\code\\\\client\\\\src\\\\Users\\\\Logout.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport LinkInClass from \"../LinkInClass\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class Logout extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      axios.defaults.withCredentials = true; // needed for sessions to work\n\n      axios.post(`${SERVER_HOST}/users/logout`).then(res => {\n        if (res.data) {\n          if (res.data.errorMessage) {\n            console.log(res.data.errorMessage);\n          } else {\n            console.log(\"User logged out\");\n            sessionStorage.clear();\n            sessionStorage.name = \"GUEST\";\n            sessionStorage.accessLevel = ACCESS_LEVEL_GUEST;\n            this.setState({\n              isLoggedIn: false\n            });\n          }\n        } else {\n          console.log(\"Logout failed\");\n        }\n      });\n    };\n\n    this.state = {\n      isLoggedIn: true\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(LinkInClass, {\n        value: \"Log out\",\n        className: \"red-button\",\n        onClick: this.handleSubmit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["C:/Legends-of-React/code/client/src/Users/Logout.js"],"names":["React","Component","axios","LinkInClass","Logout","constructor","props","handleSubmit","e","preventDefault","defaults","withCredentials","post","SERVER_HOST","then","res","data","errorMessage","console","log","sessionStorage","clear","name","accessLevel","ACCESS_LEVEL_GUEST","setState","isLoggedIn","state","render"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,OAAOC,WAAP,MAAwB,gBAAxB;;AAGA,eAAe,MAAMC,MAAN,SAAqBH,SAArB,CACf;AACII,EAAAA,WAAW,CAACC,KAAD,EACX;AACI,UAAMA,KAAN;;AADJ,SASAC,YATA,GASgBC,CAAD,IACf;AACIA,MAAAA,CAAC,CAACC,cAAF;AAEAP,MAAAA,KAAK,CAACQ,QAAN,CAAeC,eAAf,GAAiC,IAAjC,CAHJ,CAG0C;;AACtCT,MAAAA,KAAK,CAACU,IAAN,CAAY,GAAEC,WAAY,eAA1B,EACCC,IADD,CACMC,GAAG,IACT;AACI,YAAGA,GAAG,CAACC,IAAP,EACA;AACI,cAAID,GAAG,CAACC,IAAJ,CAASC,YAAb,EACA;AACIC,YAAAA,OAAO,CAACC,GAAR,CAAYJ,GAAG,CAACC,IAAJ,CAASC,YAArB;AACH,WAHD,MAKA;AACIC,YAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AACAC,YAAAA,cAAc,CAACC,KAAf;AAEAD,YAAAA,cAAc,CAACE,IAAf,GAAsB,OAAtB;AACAF,YAAAA,cAAc,CAACG,WAAf,GAA6BC,kBAA7B;AACA,iBAAKC,QAAL,CAAc;AAACC,cAAAA,UAAU,EAAC;AAAZ,aAAd;AACH;AACJ,SAfD,MAiBA;AACIR,UAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACH;AACJ,OAvBD;AAwBH,KAtCD;;AAGI,SAAKQ,KAAL,GAAa;AACTD,MAAAA,UAAU,EAAC;AADF,KAAb;AAGH;;AAmCDE,EAAAA,MAAM,GACN;AACI,wBACI;AAAA,6BAEI,QAAC,WAAD;AAAa,QAAA,KAAK,EAAC,SAAnB;AAA6B,QAAA,SAAS,EAAC,YAAvC;AAAoD,QAAA,OAAO,EAAE,KAAKrB;AAAlE;AAAA;AAAA;AAAA;AAAA;AAFJ;AAAA;AAAA;AAAA;AAAA,YADJ;AAMH;;AAnDL","sourcesContent":["import React, {Component} from \"react\"\r\nimport axios from \"axios\"\r\n\r\nimport LinkInClass from \"../LinkInClass\"\r\n\r\n\r\nexport default class Logout extends Component\r\n{\r\n    constructor(props)\r\n    {\r\n        super(props)\r\n        \r\n        this.state = {\r\n            isLoggedIn:true\r\n        }\r\n    }\r\n    \r\n    \r\n    handleSubmit = (e) => \r\n    {\r\n        e.preventDefault()\r\n        \r\n        axios.defaults.withCredentials = true // needed for sessions to work\r\n        axios.post(`${SERVER_HOST}/users/logout`)\r\n        .then(res => \r\n        {     \r\n            if(res.data)\r\n            {\r\n                if (res.data.errorMessage)\r\n                {\r\n                    console.log(res.data.errorMessage)    \r\n                }\r\n                else\r\n                { \r\n                    console.log(\"User logged out\")\r\n                    sessionStorage.clear() \r\n\r\n                    sessionStorage.name = \"GUEST\"\r\n                    sessionStorage.accessLevel = ACCESS_LEVEL_GUEST\r\n                    this.setState({isLoggedIn:false}) \r\n                }\r\n            }\r\n            else\r\n            {\r\n                console.log(\"Logout failed\")\r\n            }\r\n        }) \r\n    }\r\n\r\n\r\n    render()\r\n    {\r\n        return (\r\n            <div>   \r\n                  \r\n                <LinkInClass value=\"Log out\" className=\"red-button\" onClick={this.handleSubmit}/> \r\n            </div>\r\n        )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}