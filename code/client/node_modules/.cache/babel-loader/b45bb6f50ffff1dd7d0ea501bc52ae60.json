{"ast":null,"code":"var _jsxFileName = \"C:\\\\Legends-of-React\\\\code\\\\client\\\\src\\\\Login.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport axios from \"axios\";\nimport { Link } from 'react-router-dom';\nimport { useCookies, withCookies } from 'react-cookie';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction FormLogin(props) {\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: props.onSignin,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Username:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 10,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"username\",\n        autoComplete: \"off\",\n        ref: props.usernameRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 11,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 9,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Password:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 14,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        name: \"password\",\n        autoComplete: \"off\",\n        ref: props.passwordRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 15,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 13,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        name: \"login\",\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 18,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        name: \"signup\",\n        onClick: props.onSignup,\n        children: \"Sign up\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 19,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 17,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 8,\n    columnNumber: 9\n  }, this);\n}\n\n_c = FormLogin;\n\nfunction Login() {\n  _s();\n\n  const [cookies, setCookie, removeCookie] = useCookies(['login']);\n  const usernameRef = /*#__PURE__*/React.createRef();\n  const passwordRef = /*#__PURE__*/React.createRef();\n\n  function disconnect() {\n    removeCookie('login');\n  }\n\n  async function onSignup() {\n    const user = {\n      username: usernameRef.current.value,\n      password: passwordRef.current.value\n    };\n\n    try {\n      const p = await axios.post('http://localhost:8000/signup', user);\n\n      if (p.status === 200) {\n        user.token = p.data.token;\n        setCookie('login', user, '/');\n      }\n    } catch (err) {\n      console.error(err);\n    }\n  }\n\n  async function onSignin(e) {\n    e.preventDefault();\n    const user = {\n      username: e.target.username.value,\n      password: e.target.password.value\n    };\n\n    try {\n      const p = await axios.post('http://localhost:8000/signin', user);\n\n      if (p.status === 200) {\n        user.token = p.data.token;\n        setCookie('login', user, '/');\n      }\n    } catch (err) {\n      console.error(err);\n    }\n  }\n\n  if (cookies.login && cookies.login.token) {\n    return /*#__PURE__*/_jsxDEV(\"button\", {\n      id: \"disconnect\",\n      onClick: disconnect,\n      children: \"disconnect\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 16\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(FormLogin, {\n    onSignin: onSignin,\n    onSignup: onSignup,\n    usernameRef: usernameRef,\n    passwordRef: passwordRef\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 12\n  }, this);\n}\n\n_s(Login, \"CNPRx2yWTCxM3rIcIUTwJbky37I=\", false, function () {\n  return [useCookies];\n});\n\n_c2 = Login;\n\nfunction LocalProtectedRoute(_ref) {\n  let {\n    children,\n    ...rest\n  } = _ref;\n\n  if (rest.allCookies && rest.allCookies.login && rest.allCookies.login.username && rest.allCookies.login.token) {\n    return /*#__PURE__*/React.cloneElement(children, {\n      username: rest.allCookies.login.username,\n      token: rest.allCookies.login.token\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false);\n}\n/**\r\n * @return {null}\r\n */\n\n\n_c3 = LocalProtectedRoute;\n\nfunction LocalProtectedLink(_ref2) {\n  let { ...rest\n  } = _ref2;\n\n  if (rest.allCookies && rest.allCookies.login && rest.allCookies.login.username && rest.allCookies.login.token) {\n    return /*#__PURE__*/_jsxDEV(Link, {\n      className: rest.className,\n      to: rest.to,\n      children: \"cities\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 16\n    }, this);\n  } else {\n    return null;\n  }\n}\n\n_c4 = LocalProtectedLink;\nconst ProtectedRoute = withCookies(LocalProtectedRoute);\n_c5 = ProtectedRoute;\nconst ProtectedLink = withCookies(LocalProtectedLink);\n_c6 = ProtectedLink;\nexport { ProtectedRoute, ProtectedLink };\nexport default Login;\n\nvar _c, _c2, _c3, _c4, _c5, _c6;\n\n$RefreshReg$(_c, \"FormLogin\");\n$RefreshReg$(_c2, \"Login\");\n$RefreshReg$(_c3, \"LocalProtectedRoute\");\n$RefreshReg$(_c4, \"LocalProtectedLink\");\n$RefreshReg$(_c5, \"ProtectedRoute\");\n$RefreshReg$(_c6, \"ProtectedLink\");","map":{"version":3,"sources":["C:/Legends-of-React/code/client/src/Login.js"],"names":["React","axios","Link","useCookies","withCookies","FormLogin","props","onSignin","usernameRef","passwordRef","onSignup","Login","cookies","setCookie","removeCookie","createRef","disconnect","user","username","current","value","password","p","post","status","token","data","err","console","error","e","preventDefault","target","login","LocalProtectedRoute","children","rest","allCookies","cloneElement","LocalProtectedLink","className","to","ProtectedRoute","ProtectedLink"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport axios from \"axios\";\r\nimport {Link} from 'react-router-dom';\r\nimport {useCookies, withCookies} from 'react-cookie';\r\n\r\nfunction FormLogin(props) {\r\n    return (\r\n        <form onSubmit={props.onSignin}>\r\n            <div>\r\n                <label>Username:</label>\r\n                <input type=\"text\" id=\"username\" autoComplete=\"off\" ref={props.usernameRef}/>\r\n            </div>\r\n            <div>\r\n                <label>Password:</label>\r\n                <input type=\"password\" name=\"password\" autoComplete=\"off\" ref={props.passwordRef}/>\r\n            </div>\r\n            <div>\r\n                <button type=\"submit\" name=\"login\">Login</button>\r\n                <button type=\"button\" name=\"signup\" onClick={props.onSignup}>\r\n                    Sign up\r\n                </button>\r\n            </div>\r\n        </form>\r\n    );\r\n}\r\n\r\nfunction Login() {\r\n    const [cookies, setCookie, removeCookie] = useCookies(['login']);\r\n    const usernameRef = React.createRef();\r\n    const passwordRef = React.createRef();\r\n\r\n    function disconnect() {\r\n        removeCookie('login');\r\n    }\r\n\r\n    async function onSignup() {\r\n        const user = {\r\n            username: usernameRef.current.value,\r\n            password: passwordRef.current.value\r\n        };\r\n        try {\r\n            const p = (await axios.post('http://localhost:8000/signup', user));\r\n            if (p.status === 200) {\r\n                user.token = p.data.token;\r\n                setCookie('login', user, '/');\r\n            }\r\n        } catch (err) {\r\n            console.error(err)\r\n        }\r\n    }\r\n\r\n    async function onSignin(e) {\r\n        e.preventDefault();\r\n        const user = {\r\n            username: e.target.username.value,\r\n            password: e.target.password.value\r\n        };\r\n        try {\r\n            const p = (await axios.post('http://localhost:8000/signin', user));\r\n            if (p.status === 200) {\r\n                user.token = p.data.token;\r\n                setCookie('login', user, '/');\r\n            }\r\n        } catch (err) {\r\n            console.error(err)\r\n        }\r\n    }\r\n\r\n    if (cookies.login && cookies.login.token) {\r\n        return <button id=\"disconnect\" onClick={disconnect}>disconnect</button>;\r\n    }\r\n    return <FormLogin onSignin={onSignin} onSignup={onSignup} usernameRef={usernameRef} passwordRef={passwordRef}/>\r\n}\r\n\r\nfunction LocalProtectedRoute({children, ...rest}) {\r\n    if (rest.allCookies && rest.allCookies.login && rest.allCookies.login.username && rest.allCookies.login.token) {\r\n        return (\r\n            React.cloneElement(children, {username: rest.allCookies.login.username, token: rest.allCookies.login.token})\r\n        )\r\n    }\r\n    return <></>\r\n}\r\n\r\n\r\n/**\r\n * @return {null}\r\n */\r\nfunction LocalProtectedLink({...rest}) {\r\n    if (rest.allCookies && rest.allCookies.login && rest.allCookies.login.username && rest.allCookies.login.token) {\r\n        return <Link className={rest.className} to={rest.to}>cities</Link>\r\n    } else {\r\n        return null;\r\n    }\r\n}\r\n\r\nconst ProtectedRoute = withCookies(LocalProtectedRoute);\r\nconst ProtectedLink = withCookies(LocalProtectedLink);\r\n\r\nexport {ProtectedRoute, ProtectedLink};\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}